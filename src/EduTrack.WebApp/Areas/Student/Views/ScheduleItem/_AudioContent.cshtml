@model object
@using EduTrack.Application.Common.Models.ScheduleItems
@{
    var content = Model as AudioContent;
}

<div class="audio-content-container-minimal">
    @if (content != null)
    {
        @if (!string.IsNullOrEmpty(content.Instruction))
        {
            <div class="audio-instruction-minimal">
                <p>@content.Instruction</p>
            </div>
        }
        
        @if (!string.IsNullOrEmpty(content.AudioUrl))
        {
            <div class="audio-player-minimal">
                <audio controls class="audio-player-minimal-control" preload="metadata">
                    <source src="@content.AudioUrl" type="audio/mpeg">
                    مرورگر شما از پخش صدا پشتیبانی نمی‌کند.
                </audio>
            </div>
        }
        
        @if (content.AllowRecording)
        {
            <div class="audio-recording-minimal">
                @if (!string.IsNullOrEmpty(content.RecordingInstructions))
                {
                    <p class="recording-instructions-minimal">@content.RecordingInstructions</p>
                }
                
                <div class="recording-controls-minimal">
                    <button type="button" class="btn-recording btn-recording-start" id="start-recording">
                        <i class="fas fa-microphone"></i>
                        <span>شروع ضبط</span>
                    </button>
                    <button type="button" class="btn-recording btn-recording-stop" id="stop-recording" style="display: none;">
                        <i class="fas fa-stop"></i>
                        <span>توقف</span>
                    </button>
                    <button type="button" class="btn-recording btn-recording-play" id="play-recording" style="display: none;">
                        <i class="fas fa-play"></i>
                        <span>پخش</span>
                    </button>
                </div>
                
                <div id="recording-status" class="recording-status-minimal" style="display: none;">
                    <span id="recording-time">00:00</span>
                </div>
                
                <audio id="recorded-audio" controls class="recorded-audio-minimal" style="display: none;"></audio>
            </div>
        }
        
        <div class="audio-actions-minimal">
            @if (content.AllowRecording)
            {
                <button type="button" class="btn-action btn-action-save" id="save-audio-answer">
                    <i class="fas fa-save"></i>
                    <span>ذخیره</span>
                </button>
            }
            <button type="button" class="btn-action btn-action-submit" id="submit-audio-answer">
                <i class="fas fa-paper-plane"></i>
                <span>ارسال</span>
            </button>
        </div>
    }
    else
    {
        <div class="content-empty-state">
            <i class="fas fa-info-circle"></i>
            <p>محتوای صوتی یافت نشد.</p>
        </div>
    }
</div>
