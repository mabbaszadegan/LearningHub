@model EduTrack.Application.Common.Models.DashboardViewModel
@{
    ViewData["Title"] = "داشبورد";
}

<div class="container-fluid teacher-dashboard-enhanced">
    <!-- Enhanced Stats Cards -->
    <div class="row g-4 mb-5">
        <div class="col-lg-3 col-md-6">
            <div class="stats-card-enhanced">
                <div class="stats-card-header">
                    <div class="stats-icon-enhanced success">
                        <i class="fas fa-book"></i>
                    </div>
                    <div class="stats-trend positive">
                        <i class="fas fa-arrow-up"></i>
                        <span>+12%</span>
                    </div>
                </div>
                <div class="stats-content">
                    <div class="stats-number">@Model.TotalCourses</div>
                    <div class="stats-label">دوره فعال</div>
                    <div class="stats-description">دوره‌های در حال تدریس</div>
                </div>
            </div>
        </div>
        <div class="col-lg-3 col-md-6">
            <div class="stats-card-enhanced">
                <div class="stats-card-header">
                    <div class="stats-icon-enhanced primary">
                        <i class="fas fa-users"></i>
                    </div>
                    <div class="stats-trend positive">
                        <i class="fas fa-arrow-up"></i>
                        <span>+8%</span>
                    </div>
                </div>
                <div class="stats-content">
                    <div class="stats-number">125</div>
                    <div class="stats-label">دانش‌آموز</div>
                    <div class="stats-description">کل دانش‌آموزان فعال</div>
                </div>
            </div>
        </div>
        <div class="col-lg-3 col-md-6">
            <div class="stats-card-enhanced">
                <div class="stats-card-header">
                    <div class="stats-icon-enhanced warning">
                        <i class="fas fa-clipboard-list"></i>
                    </div>
                    <div class="stats-trend neutral">
                        <i class="fas fa-minus"></i>
                        <span>0%</span>
                    </div>
                </div>
                <div class="stats-content">
                    <div class="stats-number">@Model.RecentExams.TotalCount</div>
                    <div class="stats-label">آزمون فعال</div>
                    <div class="stats-description">آزمون‌های در انتظار تصحیح</div>
                </div>
            </div>
        </div>
        <div class="col-lg-3 col-md-6">
            <div class="stats-card-enhanced">
                <div class="stats-card-header">
                    <div class="stats-icon-enhanced info">
                        <i class="fas fa-chart-line"></i>
                    </div>
                    <div class="stats-trend positive">
                        <i class="fas fa-arrow-up"></i>
                        <span>+5%</span>
                    </div>
                </div>
                <div class="stats-content">
                    <div class="stats-number">85%</div>
                    <div class="stats-label">میانگین نمرات</div>
                    <div class="stats-description">عملکرد کلی دانش‌آموزان</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Dashboard Content -->
    <div class="row g-4">
        <!-- Left Column - Main Content -->
        <div class="col-lg-8">
            <!-- Enhanced Quick Actions -->
            <div class="dashboard-panel mb-4">
                <div class="panel-header">
                    <h3 class="panel-title">
                        <i class="fas fa-bolt"></i>
                        ابزارهای سریع
                    </h3>
                </div>
                <div class="panel-body">
                    <div class="row g-3">
                        <div class="col-lg-3 col-md-6">
                            <a asp-controller="Courses" asp-action="Create" class="quick-action-card">
                                <div class="quick-action-icon primary">
                                    <i class="fas fa-plus"></i>
                                </div>
                                <div class="quick-action-text">دوره جدید</div>
                            </a>
                        </div>
                        <div class="col-lg-3 col-md-6">
                            <a asp-controller="Exam" asp-action="Create" class="quick-action-card">
                                <div class="quick-action-icon success">
                                    <i class="fas fa-clipboard-list"></i>
                                </div>
                                <div class="quick-action-text">آزمون جدید</div>
                            </a>
                        </div>
                        <div class="col-lg-3 col-md-6">
                            <a asp-controller="Classes" asp-action="Create" class="quick-action-card">
                                <div class="quick-action-icon warning">
                                    <i class="fas fa-users"></i>
                                </div>
                                <div class="quick-action-text">کلاس جدید</div>
                            </a>
                        </div>
                        <div class="col-lg-3 col-md-6">
                            <a asp-controller="Progress" asp-action="Index" class="quick-action-card">
                                <div class="quick-action-icon info">
                                    <i class="fas fa-chart-bar"></i>
                                </div>
                                <div class="quick-action-text">گزارش‌ها</div>
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Enhanced Courses List -->
            <div class="dashboard-panel mb-4">
                <div class="panel-header">
                    <h3 class="panel-title">
                        <i class="fas fa-book"></i>
                        دوره‌های من
                    </h3>
                    <a asp-controller="Courses" asp-action="Index" class="btn btn-outline-primary btn-sm">
                        <i class="fas fa-list me-1"></i>
                        مشاهده همه
                    </a>
                </div>
                <div class="panel-body">
                    @if (Model.Courses.Items.Any())
                    {
                        <div class="row g-4">
                            @foreach (var course in Model.Courses.Items.Take(4))
                            {
                                <div class="col-md-6">
                                    <div class="course-card enhanced">
                                        <div class="course-card-header">
                                            <div class="course-card-image">
                                                <i class="fas fa-graduation-cap"></i>
                                            </div>
                                        </div>
                                        <div class="course-card-content">
                                            <h5 class="course-title">@course.Title</h5>
                                            <p class="course-description">@course.Description</p>
                                            <div class="course-stats">
                                                <div class="course-stat">
                                                    <div class="course-stat-number">@course.ModuleCount</div>
                                                    <div class="course-stat-label">ماژول</div>
                                                </div>
                                                <div class="course-stat">
                                                    <div class="course-stat-number">@course.LessonCount</div>
                                                    <div class="course-stat-label">درس</div>
                                                </div>
                                                <div class="course-stat">
                                                    <a asp-controller="Courses" asp-action="Edit" asp-route-id="@course.Id" class="btn btn-primary btn-sm">
                                                        <i class="fas fa-edit"></i>
                                                    </a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            }
                        </div>
                    }
                    else
                    {
                        <div class="empty-state">
                            <div class="empty-state-icon">
                                <i class="fas fa-book"></i>
                            </div>
                            <h4 class="empty-state-title">هنوز دوره‌ای ایجاد نشده</h4>
                            <p class="empty-state-description">برای شروع تدریس، اولین دوره خود را ایجاد کنید</p>
                            <a asp-controller="Courses" asp-action="Create" class="btn btn-primary">
                                <i class="fas fa-plus me-2"></i>
                                ایجاد دوره جدید
                            </a>
                        </div>
                    }
                </div>
            </div>
        </div>
        
        <!-- Right Sidebar - Enhanced -->
        <div class="col-lg-4">
            <!-- Recent Activities -->
            <div class="dashboard-panel mb-4">
                <div class="panel-header">
                    <h3 class="panel-title">
                        <i class="fas fa-clock"></i>
                        فعالیت‌های اخیر
                    </h3>
                </div>
                <div class="panel-body">
                    <div class="activity-timeline">
                        <div class="activity-item">
                            <div class="activity-icon success">
                                <i class="fas fa-user-plus"></i>
                            </div>
                            <div class="activity-content">
                                <div class="activity-title">دانش‌آموز جدید</div>
                                <div class="activity-time">علی احمدی به کلاس پیوست</div>
                            </div>
                        </div>
                        <div class="activity-item">
                            <div class="activity-icon primary">
                                <i class="fas fa-clipboard-check"></i>
                            </div>
                            <div class="activity-content">
                                <div class="activity-title">آزمون تکمیل شد</div>
                                <div class="activity-time">آزمون مبحث 3 ریاضی</div>
                            </div>
                        </div>
                        <div class="activity-item">
                            <div class="activity-icon warning">
                                <i class="fas fa-exclamation-triangle"></i>
                            </div>
                            <div class="activity-content">
                                <div class="activity-title">نیاز به بررسی</div>
                                <div class="activity-time">نمرات پایین آزمون فیزیک</div>
                            </div>
                        </div>
                        <div class="activity-item">
                            <div class="activity-icon info">
                                <i class="fas fa-book"></i>
                            </div>
                            <div class="activity-content">
                                <div class="activity-title">درس جدید اضافه شد</div>
                                <div class="activity-time">درس 5 - دوره ریاضی</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Quick Links -->
            <div class="dashboard-panel">
                <div class="panel-header">
                    <h3 class="panel-title">
                        <i class="fas fa-link"></i>
                        لینک‌های سریع
                    </h3>
                </div>
                <div class="panel-body">
                    <div class="quick-links">
                        <a asp-controller="TeachingSessions" asp-action="Index" class="quick-link">
                            <i class="fas fa-chalkboard-teacher me-2"></i>
                            جلسات تدریس
                        </a>
                        <a asp-controller="ScheduleItems" asp-action="Index" class="quick-link">
                            <i class="fas fa-calendar-alt me-2"></i>
                            برنامه‌ریزی درسی
                        </a>
                        <a asp-controller="Progress" asp-action="Index" class="quick-link">
                            <i class="fas fa-chart-line me-2"></i>
                            پیشرفت دانش‌آموزان
                        </a>
                        <a asp-controller="Exam" asp-action="Index" class="quick-link">
                            <i class="fas fa-clipboard-list me-2"></i>
                            آزمون‌ها و نمرات
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@section Styles {
    <link rel="stylesheet" href="~/css/areas/teacher/teacher-dashboard-enhanced.css" asp-append-version="true" />
}

@section Scripts {
    <script src="~/js/areas/teacher/teacher-dashboard-enhanced.js" asp-append-version="true"></script>
}
