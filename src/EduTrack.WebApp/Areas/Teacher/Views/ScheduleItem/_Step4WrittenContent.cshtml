@model EduTrack.Application.Common.Models.ScheduleItems.CreateScheduleItemRequest

<div class="written-content-builder">
    <div class="content-builder-header">
        <div class="header-content">
            <h3>طراحی محتوای نوشتاری</h3>
            <p>سوالات مختلف را اضافه کنید تا تمرین نوشتاری خود را بسازید</p>
        </div>
        <div class="blocks-actions">
            <button type="button" class="btn-teacher btn-primary" id="addQuestionBlockBtn" onclick="showWrittenQuestionBlockTypeModal()">
                <i class="fas fa-plus"></i>
                <span>افزودن سوال</span>
            </button>
            <button type="button" class="btn-teacher btn-info" id="previewWrittenBtn" onclick="updateWrittenPreview()">
                <i class="fas fa-eye"></i>
                <span>پیش‌نمایش</span>
            </button>
        </div>
    </div>
    
    <div class="content-builder-container">
        <div class="blocks-section">
            <div class="blocks-list" id="questionBlocksList">
                <!-- Question blocks will be added here dynamically -->
                <div class="empty-state" id="emptyQuestionBlocksState">
                    <div class="empty-state-icon">
                        <i class="fas fa-question-circle"></i>
                    </div>
                    <h4>هنوز سوالی اضافه نشده</h4>
                    <p>برای شروع، روی دکمه "افزودن سوال" کلیک کنید</p>
                </div>
            </div>
        </div>
        
        <div class="preview-section" style="display: none;">
            <div class="content-preview">
                <div class="preview-header">
                    <h4>پیش‌نمایش تمرین نوشتاری</h4>
                </div>
                <div class="preview-content" id="writtenPreview">
                    <div class="written-exercise-card">
                        <div class="exercise-icon">
                            <i class="fas fa-edit"></i>
                        </div>
                        <div class="exercise-text">
                            <p>تمرین نوشتاری شما اینجا نمایش داده خواهد شد...</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Question Block Templates -->
<div id="questionBlockTemplates" style="display: none;">
    <!-- Text Question Template -->
    <div class="question-block-template" data-type="text">
        <div class="block-header">
            <div class="block-type">
                <i class="fas fa-font"></i>
                <span>سوال متنی</span>
            </div>
            <div class="block-actions">
                <button type="button" class="btn-icon" data-action="move-up" title="انتقال به بالا">
                    <i class="fas fa-arrow-up"></i>
                </button>
                <button type="button" class="btn-icon" data-action="move-down" title="انتقال به پایین">
                    <i class="fas fa-arrow-down"></i>
                </button>
                <button type="button" class="btn-icon success" data-action="insert-above" title="درج سوال بالا">
                    <i class="fas fa-plus"></i>
                </button>
                <button type="button" class="btn-icon" data-action="fullscreen" title="تمام صفحه">
                    <i class="fas fa-expand"></i>
                </button>
                <button type="button" class="btn-icon danger" data-action="delete" title="حذف">
                    <i class="fas fa-trash"></i>
                </button>
            </div>
            <i class="fas fa-chevron-down collapse-icon" data-action="toggle-collapse"></i>
        </div>
        <div class="block-content">
            <div class="question-settings">
                <div class="settings-grid">
                    <div class="setting-item">
                        <label>امتیاز:</label>
                        <input type="number" class="form-control-sm" data-setting="points" value="1" min="0" max="100">
                    </div>
                    <div class="setting-item">
                        <label class="checkbox-label">
                            <input type="checkbox" data-setting="isRequired" checked>
                            <span>اجباری</span>
                        </label>
                    </div>
                </div>
            </div>
            <div class="question-text-editor">
                <label>متن سوال:</label>
                <div class="text-editor-toolbar">
                    <button type="button" class="toolbar-btn" data-command="bold" title="ضخیم">
                        <i class="fas fa-bold"></i>
                    </button>
                    <button type="button" class="toolbar-btn" data-command="italic" title="مورب">
                        <i class="fas fa-italic"></i>
                    </button>
                    <button type="button" class="toolbar-btn" data-command="underline" title="زیرخط">
                        <i class="fas fa-underline"></i>
                    </button>
                    <div class="toolbar-separator"></div>
                    <button type="button" class="toolbar-btn" data-command="insertUnorderedList" title="لیست نقطه‌ای">
                        <i class="fas fa-list-ul"></i>
                    </button>
                    <button type="button" class="toolbar-btn" data-command="insertOrderedList" title="لیست شماره‌ای">
                        <i class="fas fa-list-ol"></i>
                    </button>
                </div>
                <div class="rich-text-editor" contenteditable="true" data-placeholder="متن سوال خود را اینجا تایپ کنید...">
                    <!-- Rich text content will be here -->
                </div>
            </div>
            <div class="question-hint">
                <label>راهنمایی (اختیاری):</label>
                <textarea placeholder="راهنمایی برای دانش‌آموز..." rows="2" data-hint="true"></textarea>
            </div>
        </div>
    </div>

    <!-- Image Question Template -->
    <div class="question-block-template" data-type="image">
        <div class="block-header">
            <div class="block-type">
                <i class="fas fa-image"></i>
                <span>سوال تصویری</span>
            </div>
            <div class="block-actions">
                <button type="button" class="btn-icon" data-action="move-up" title="انتقال به بالا">
                    <i class="fas fa-arrow-up"></i>
                </button>
                <button type="button" class="btn-icon" data-action="move-down" title="انتقال به پایین">
                    <i class="fas fa-arrow-down"></i>
                </button>
                <button type="button" class="btn-icon success" data-action="insert-above" title="درج سوال بالا">
                    <i class="fas fa-plus"></i>
                </button>
                <button type="button" class="btn-icon" data-action="fullscreen" title="تمام صفحه">
                    <i class="fas fa-expand"></i>
                </button>
                <button type="button" class="btn-icon danger" data-action="delete" title="حذف">
                    <i class="fas fa-trash"></i>
                </button>
            </div>
            <i class="fas fa-chevron-down collapse-icon" data-action="toggle-collapse"></i>
        </div>
        <div class="block-content">
            <div class="question-settings">
                <div class="settings-grid">
                    <div class="setting-item">
                        <label>امتیاز:</label>
                        <input type="number" class="form-control-sm" data-setting="points" value="1" min="0" max="100">
                    </div>
                    <div class="setting-item">
                        <label class="checkbox-label">
                            <input type="checkbox" data-setting="isRequired" checked>
                            <span>اجباری</span>
                        </label>
                    </div>
                </div>
            </div>
            <div class="question-text-editor">
                <label>متن سوال:</label>
                <div class="rich-text-editor" contenteditable="true" data-placeholder="سوال مربوط به تصویر را اینجا تایپ کنید...">
                    <!-- Rich text content will be here -->
                </div>
            </div>
            <div class="image-upload-area">
                <input type="file" accept="image/*" class="file-input" data-action="image-upload">
                <div class="upload-placeholder">
                    <i class="fas fa-cloud-upload-alt"></i>
                    <span>تصویر سوال را اینجا بکشید یا کلیک کنید</span>
                    <small>فرمت‌های پشتیبانی شده: JPG, PNG, GIF (حداکثر 5MB)</small>
                </div>
                <div class="upload-progress" style="display: none;">
                    <div class="progress-bar">
                        <div class="progress-fill"></div>
                    </div>
                    <span class="progress-text">در حال آپلود...</span>
                </div>
            </div>
            <div class="image-preview" style="display: none;">
                <img src="" alt="پیش‌نمایش تصویر سوال" class="preview-image">
                <button type="button" class="btn-teacher btn-secondary btn-sm" data-action="change-image">
                    <i class="fas fa-edit"></i>
                    <span>تغییر تصویر</span>
                </button>
            </div>
            <div class="image-settings">
                <div class="settings-grid">
                    <div class="setting-item">
                        <label>اندازه:</label>
                        <select class="form-select-sm" data-setting="size">
                            <option value="small">کوچک (300px)</option>
                            <option value="medium" selected>متوسط (500px)</option>
                            <option value="large">بزرگ (700px)</option>
                            <option value="full">تمام عرض</option>
                        </select>
                    </div>
                    <div class="setting-item">
                        <label>موقعیت:</label>
                        <select class="form-select-sm" data-setting="position">
                            <option value="left">چپ</option>
                            <option value="center" selected>وسط</option>
                            <option value="right">راست</option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="question-hint">
                <label>راهنمایی (اختیاری):</label>
                <textarea placeholder="راهنمایی برای دانش‌آموز..." rows="2" data-hint="true"></textarea>
            </div>
        </div>
    </div>

    <!-- Video Question Template -->
    <div class="question-block-template" data-type="video">
        <div class="block-header">
            <div class="block-type">
                <i class="fas fa-video"></i>
                <span>سوال ویدیویی</span>
            </div>
            <div class="block-actions">
                <button type="button" class="btn-icon" data-action="move-up" title="انتقال به بالا">
                    <i class="fas fa-arrow-up"></i>
                </button>
                <button type="button" class="btn-icon" data-action="move-down" title="انتقال به پایین">
                    <i class="fas fa-arrow-down"></i>
                </button>
                <button type="button" class="btn-icon success" data-action="insert-above" title="درج سوال بالا">
                    <i class="fas fa-plus"></i>
                </button>
                <button type="button" class="btn-icon" data-action="fullscreen" title="تمام صفحه">
                    <i class="fas fa-expand"></i>
                </button>
                <button type="button" class="btn-icon danger" data-action="delete" title="حذف">
                    <i class="fas fa-trash"></i>
                </button>
            </div>
            <i class="fas fa-chevron-down collapse-icon" data-action="toggle-collapse"></i>
        </div>
        <div class="block-content">
            <div class="question-settings">
                <div class="settings-grid">
                    <div class="setting-item">
                        <label>امتیاز:</label>
                        <input type="number" class="form-control-sm" data-setting="points" value="1" min="0" max="100">
                    </div>
                    <div class="setting-item">
                        <label class="checkbox-label">
                            <input type="checkbox" data-setting="isRequired" checked>
                            <span>اجباری</span>
                        </label>
                    </div>
                </div>
            </div>
            <div class="question-text-editor">
                <label>متن سوال:</label>
                <div class="rich-text-editor" contenteditable="true" data-placeholder="سوال مربوط به ویدیو را اینجا تایپ کنید...">
                    <!-- Rich text content will be here -->
                </div>
            </div>
            <div class="video-upload-area">
                <input type="file" accept="video/*" class="file-input" data-action="video-upload">
                <div class="upload-placeholder">
                    <i class="fas fa-cloud-upload-alt"></i>
                    <span>ویدیو سوال را اینجا بکشید یا کلیک کنید</span>
                    <small>فرمت‌های پشتیبانی شده: MP4, WebM, MOV (حداکثر 50MB)</small>
                </div>
                <div class="upload-progress" style="display: none;">
                    <div class="progress-bar">
                        <div class="progress-fill"></div>
                    </div>
                    <span class="progress-text">در حال آپلود...</span>
                </div>
            </div>
            <div class="video-preview" style="display: none;">
                <video controls class="preview-video">
                    <source src="" type="video/mp4">
                </video>
                <button type="button" class="btn-teacher btn-secondary btn-sm" data-action="change-video">
                    <i class="fas fa-edit"></i>
                    <span>تغییر ویدیو</span>
                </button>
            </div>
            <div class="video-settings">
                <div class="settings-grid">
                    <div class="setting-item">
                        <label>اندازه:</label>
                        <select class="form-select-sm" data-setting="size">
                            <option value="small">کوچک (400px)</option>
                            <option value="medium" selected>متوسط (600px)</option>
                            <option value="large">بزرگ (800px)</option>
                            <option value="full">تمام عرض</option>
                        </select>
                    </div>
                    <div class="setting-item">
                        <label>موقعیت:</label>
                        <select class="form-select-sm" data-setting="position">
                            <option value="left">چپ</option>
                            <option value="center" selected>وسط</option>
                            <option value="right">راست</option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="question-hint">
                <label>راهنمایی (اختیاری):</label>
                <textarea placeholder="راهنمایی برای دانش‌آموز..." rows="2" data-hint="true"></textarea>
            </div>
        </div>
    </div>

    <!-- Audio Question Template -->
    <div class="question-block-template" data-type="audio">
        <div class="block-header">
            <div class="block-type">
                <i class="fas fa-microphone"></i>
                <span>سوال صوتی</span>
            </div>
            <div class="block-actions">
                <button type="button" class="btn-icon" data-action="move-up" title="انتقال به بالا">
                    <i class="fas fa-arrow-up"></i>
                </button>
                <button type="button" class="btn-icon" data-action="move-down" title="انتقال به پایین">
                    <i class="fas fa-arrow-down"></i>
                </button>
                <button type="button" class="btn-icon success" data-action="insert-above" title="درج سوال بالا">
                    <i class="fas fa-plus"></i>
                </button>
                <button type="button" class="btn-icon" data-action="fullscreen" title="تمام صفحه">
                    <i class="fas fa-expand"></i>
                </button>
                <button type="button" class="btn-icon danger" data-action="delete" title="حذف">
                    <i class="fas fa-trash"></i>
                </button>
            </div>
            <i class="fas fa-chevron-down collapse-icon" data-action="toggle-collapse"></i>
        </div>
        <div class="block-content">
            <div class="question-settings">
                <div class="settings-grid">
                    <div class="setting-item">
                        <label>امتیاز:</label>
                        <input type="number" class="form-control-sm" data-setting="points" value="1" min="0" max="100">
                    </div>
                    <div class="setting-item">
                        <label class="checkbox-label">
                            <input type="checkbox" data-setting="isRequired" checked>
                            <span>اجباری</span>
                        </label>
                    </div>
                </div>
            </div>
            <div class="question-text-editor">
                <label>متن سوال:</label>
                <div class="rich-text-editor" contenteditable="true" data-placeholder="سوال مربوط به فایل صوتی را اینجا تایپ کنید...">
                    <!-- Rich text content will be here -->
                </div>
            </div>
            <div class="audio-upload-area">
                <input type="file" accept="audio/*" class="file-input" data-action="audio-upload">
                <div class="upload-placeholder">
                    <i class="fas fa-cloud-upload-alt"></i>
                    <span>فایل صوتی سوال را اینجا بکشید یا کلیک کنید</span>
                    <small>فرمت‌های پشتیبانی شده: MP3, WAV, OGG (حداکثر 10MB)</small>
                </div>
                <div class="upload-progress" style="display: none;">
                    <div class="progress-bar">
                        <div class="progress-fill"></div>
                    </div>
                    <span class="progress-text">در حال آپلود...</span>
                </div>
            </div>
            <div class="audio-preview" style="display: none;">
                <audio controls class="preview-audio">
                    <source src="" type="audio/mpeg">
                </audio>
                <button type="button" class="btn-teacher btn-secondary btn-sm" data-action="change-audio">
                    <i class="fas fa-edit"></i>
                    <span>تغییر فایل صوتی</span>
                </button>
            </div>
            <div class="audio-recorder">
                <div class="recorder-header">
                    <h5>یا صدای خود را ضبط کنید:</h5>
                </div>
                <div class="recorder-controls">
                    <button type="button" class="btn-teacher btn-danger" data-action="start-recording">
                        <i class="fas fa-microphone"></i>
                        <span>شروع ضبط</span>
                    </button>
                    <button type="button" class="btn-teacher btn-secondary" data-action="stop-recording" disabled>
                        <i class="fas fa-stop"></i>
                        <span>توقف ضبط</span>
                    </button>
                    <button type="button" class="btn-teacher btn-success" data-action="play-recording" disabled>
                        <i class="fas fa-play"></i>
                        <span>پخش</span>
                    </button>
                </div>
                <div class="recorder-status">
                    <span class="recording-status">آماده برای ضبط</span>
                    <div class="recording-timer" style="display: none;">
                        <span class="timer-display">00:00</span>
                    </div>
                </div>
            </div>
            <div class="question-hint">
                <label>راهنمایی (اختیاری):</label>
                <textarea placeholder="راهنمایی برای دانش‌آموز..." rows="2" data-hint="true"></textarea>
            </div>
        </div>
    </div>

    <!-- Code Question Template -->
    <div class="question-block-template" data-type="code">
        <div class="block-header">
            <div class="block-type">
                <i class="fas fa-code"></i>
                <span>سوال کدی</span>
            </div>
            <div class="block-actions">
                <button type="button" class="btn-icon" data-action="move-up" title="انتقال به بالا">
                    <i class="fas fa-arrow-up"></i>
                </button>
                <button type="button" class="btn-icon" data-action="move-down" title="انتقال به پایین">
                    <i class="fas fa-arrow-down"></i>
                </button>
                <button type="button" class="btn-icon success" data-action="insert-above" title="درج سوال بالا">
                    <i class="fas fa-plus"></i>
                </button>
                <button type="button" class="btn-icon" data-action="fullscreen" title="تمام صفحه">
                    <i class="fas fa-expand"></i>
                </button>
                <button type="button" class="btn-icon danger" data-action="delete" title="حذف">
                    <i class="fas fa-trash"></i>
                </button>
            </div>
            <i class="fas fa-chevron-down collapse-icon" data-action="toggle-collapse"></i>
        </div>
        <div class="block-content">
            <div class="question-settings">
                <div class="settings-grid">
                    <div class="setting-item">
                        <label>امتیاز:</label>
                        <input type="number" class="form-control-sm" data-setting="points" value="1" min="0" max="100">
                    </div>
                    <div class="setting-item">
                        <label class="checkbox-label">
                            <input type="checkbox" data-setting="isRequired" checked>
                            <span>اجباری</span>
                        </label>
                    </div>
                </div>
            </div>
            <div class="question-text-editor">
                <label>متن سوال:</label>
                <div class="rich-text-editor" contenteditable="true" data-placeholder="سوال مربوط به کد را اینجا تایپ کنید...">
                    <!-- Rich text content will be here -->
                </div>
            </div>
            <div class="code-block-settings">
                <div class="settings-grid">
                    <div class="setting-item">
                        <label>زبان برنامه‌نویسی:</label>
                        <select class="form-select-sm" data-setting="language">
                            <option value="javascript">JavaScript</option>
                            <option value="python">Python</option>
                            <option value="csharp">C#</option>
                            <option value="java">Java</option>
                            <option value="cpp">C++</option>
                            <option value="c">C</option>
                            <option value="php">PHP</option>
                            <option value="ruby">Ruby</option>
                            <option value="go">Go</option>
                            <option value="rust">Rust</option>
                            <option value="swift">Swift</option>
                            <option value="kotlin">Kotlin</option>
                            <option value="typescript">TypeScript</option>
                            <option value="html">HTML</option>
                            <option value="css">CSS</option>
                            <option value="scss">SCSS</option>
                            <option value="sql">SQL</option>
                            <option value="json">JSON</option>
                            <option value="xml">XML</option>
                            <option value="yaml">YAML</option>
                            <option value="markdown">Markdown</option>
                            <option value="bash">Bash</option>
                            <option value="powershell">PowerShell</option>
                            <option value="plaintext" selected>Plain Text</option>
                        </select>
                    </div>
                    <div class="setting-item">
                        <label>تم رنگی:</label>
                        <select class="form-select-sm" data-setting="theme">
                            <option value="default" selected>پیش‌فرض</option>
                            <option value="dark">تیره</option>
                            <option value="light">روشن</option>
                            <option value="monokai">Monokai</option>
                            <option value="github">GitHub</option>
                            <option value="vs">Visual Studio</option>
                            <option value="atom">Atom</option>
                            <option value="dracula">Dracula</option>
                        </select>
                    </div>
                </div>
                <div class="settings-row">
                    <div class="setting-item full-width">
                        <label>عنوان کد (اختیاری):</label>
                        <input type="text" class="form-control-sm" data-setting="title" placeholder="عنوان کد را وارد کنید">
                    </div>
                </div>
                <div class="settings-row">
                    <div class="setting-item">
                        <label class="checkbox-label">
                            <input type="checkbox" data-setting="showLineNumbers" checked>
                            <span>نمایش شماره خط</span>
                        </label>
                    </div>
                    <div class="setting-item">
                        <label class="checkbox-label">
                            <input type="checkbox" data-setting="enableCopyButton" checked>
                            <span>دکمه کپی</span>
                        </label>
                    </div>
                </div>
            </div>
            <div class="code-editor-container">
                <div class="code-editor-header">
                    <div class="code-language-badge">
                        <i class="fas fa-code"></i>
                        <span class="language-name">Plain Text</span>
                    </div>
                    <div class="code-actions">
                        <button type="button" class="btn-icon" data-action="copy-code" title="کپی کد">
                            <i class="fas fa-copy"></i>
                        </button>
                        <button type="button" class="btn-icon" data-action="format-code" title="فرمت کد">
                            <i class="fas fa-magic"></i>
                        </button>
                    </div>
                </div>
                <div class="code-editor">
                    <textarea class="code-textarea" data-code-content placeholder="کد خود را اینجا وارد کنید..."></textarea>
                    <div class="code-preview" data-code-preview></div>
                </div>
                <div class="code-stats">
                    <span class="line-count">خط: <span data-line-count>0</span></span>
                    <span class="char-count">کاراکتر: <span data-char-count>0</span></span>
                </div>
            </div>
            <div class="question-hint">
                <label>راهنمایی (اختیاری):</label>
                <textarea placeholder="راهنمایی برای دانش‌آموز..." rows="2" data-hint="true"></textarea>
            </div>
        </div>
    </div>
</div>

<!-- Question Type Selection Modal -->
<div class="modal fade" id="questionTypeModal" tabindex="-1" aria-labelledby="questionTypeModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="questionTypeModalLabel">
                    <i class="fas fa-plus"></i>
                    انتخاب نوع سوال
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="question-type-grid">
                    <div class="question-type-item" data-type="text">
                        <div class="type-icon">
                            <i class="fas fa-font"></i>
                        </div>
                        <div class="type-info">
                            <h6>متن</h6>
                            <p>سوال متنی با قابلیت فرمت‌بندی</p>
                        </div>
                    </div>
                    
                    <div class="question-type-item" data-type="image">
                        <div class="type-icon">
                            <i class="fas fa-image"></i>
                        </div>
                        <div class="type-info">
                            <h6>تصویر</h6>
                            <p>سوال همراه با تصویر</p>
                        </div>
                    </div>
                    
                    <div class="question-type-item" data-type="video">
                        <div class="type-icon">
                            <i class="fas fa-video"></i>
                        </div>
                        <div class="type-info">
                            <h6>ویدیو</h6>
                            <p>سوال همراه با ویدیو</p>
                        </div>
                    </div>
                    
                    <div class="question-type-item" data-type="audio">
                        <div class="type-icon">
                            <i class="fas fa-microphone"></i>
                        </div>
                        <div class="type-info">
                            <h6>صوت</h6>
                            <p>سوال همراه با فایل صوتی</p>
                        </div>
                    </div>
                    
                    <div class="question-type-item" data-type="code">
                        <div class="type-icon">
                            <i class="fas fa-code"></i>
                        </div>
                        <div class="type-info">
                            <h6>کد</h6>
                            <p>سوال همراه با کد برنامه‌نویسی</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Preview Modal -->
<div class="modal fade" id="writtenPreviewModal" tabindex="-1" aria-labelledby="writtenPreviewModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="writtenPreviewModalLabel">
                    <i class="fas fa-eye"></i>
                    پیش‌نمایش تمرین نوشتاری
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="preview-container">
                    <div class="preview-content" id="modalWrittenPreview">
                        <div class="written-exercise-card">
                            <div class="exercise-icon">
                                <i class="fas fa-edit"></i>
                            </div>
                            <div class="exercise-text">
                                <p>تمرین نوشتاری شما اینجا نمایش داده خواهد شد...</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn-teacher btn-secondary" data-bs-dismiss="modal">بستن</button>
                <button type="button" class="btn-teacher btn-primary" onclick="updateWrittenPreview()">
                    <i class="fas fa-sync-alt"></i>
                    <span>به‌روزرسانی پیش‌نمایش</span>
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Hidden field for content -->
<input type="hidden" id="writtenContentJson" name="WrittenContentJson" value="@Model.ContentJson" />

<!-- Question Block Type Selection Modal -->
<div class="modal fade" id="writtenQuestionBlockTypeModal" tabindex="-1" aria-labelledby="writtenQuestionBlockTypeModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="writtenQuestionBlockTypeModalLabel">
                    <i class="fas fa-plus"></i>
                    انتخاب نوع سوال
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="question-type-grid">
                    <div class="question-type-item" data-type="text">
                        <div class="type-icon">
                            <i class="fas fa-font"></i>
                        </div>
                        <div class="type-info">
                            <h6>متن</h6>
                            <p>سوال متنی با قابلیت فرمت‌بندی</p>
                        </div>
                    </div>

                    <div class="question-type-item" data-type="image">
                        <div class="type-icon">
                            <i class="fas fa-image"></i>
                        </div>
                        <div class="type-info">
                            <h6>تصویر</h6>
                            <p>سوال با تصویر و تنظیمات</p>
                        </div>
                    </div>

                    <div class="question-type-item" data-type="video">
                        <div class="type-icon">
                            <i class="fas fa-video"></i>
                        </div>
                        <div class="type-info">
                            <h6>ویدیو</h6>
                            <p>سوال با ویدیو آموزشی و تنظیمات</p>
                        </div>
                    </div>

                    <div class="question-type-item" data-type="audio">
                        <div class="type-icon">
                            <i class="fas fa-microphone"></i>
                        </div>
                        <div class="type-info">
                            <h6>صوت</h6>
                            <p>سوال با فایل صوتی یا ضبط صدا</p>
                        </div>
                    </div>

                    <div class="question-type-item" data-type="code">
                        <div class="type-icon">
                            <i class="fas fa-code"></i>
                        </div>
                        <div class="type-info">
                            <h6>کد</h6>
                            <p>سوال با بلاک کد برنامه‌نویسی</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
