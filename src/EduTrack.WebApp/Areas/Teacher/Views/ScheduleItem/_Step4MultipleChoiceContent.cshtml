<link rel="stylesheet" href="~/css/areas/teacher/schedule-items/multiple-choice-content-builder.css" asp-append-version="true" />
<link rel="stylesheet" href="~/css/areas/teacher/schedule-items/stage4-enhancements.css" asp-append-version="true" />

@model EduTrack.Application.Common.Models.ScheduleItems.CreateScheduleItemRequest

<div class="multiple-choice-content-builder">
    <div class="builder-content-layout">
        <!-- Main Content Area -->
        <div class="main-content-area">
            <div class="blocks-list" id="contentBlocksList">
                <!-- Question blocks will be added here dynamically -->
                <div class="empty-state" id="emptyBlocksState">
                    <div class="empty-state-icon">
                        <i class="fas fa-list-ul"></i>
                    </div>
                    <h4>هنوز بلاک چندگزینه‌ای اضافه نشده</h4>
                    <p>برای شروع، روی دکمه "افزودن بلاک" کلیک کنید</p>
                </div>
            </div>
        </div>

        <!-- Fixed Sidebar -->
        <div class="content-sidebar">
            <div class="sidebar-header">
                <div class="sidebar-title">
                    <i class="fas fa-list"></i>
                    <span>فهرست بلاک‌ها</span>
                </div>
                <div class="sidebar-count" id="sidebarBlockCount">0</div>
            </div>
            <div class="sidebar-content">
                <div class="blocks-navigation" id="blocksNavigation"></div>
            </div>
        </div>
    </div>
</div>

<!-- Preview Section (hidden by default) -->
<div class="preview-section" id="writtenPreview" style="display: none;">
    <div class="content-preview">
        <div class="preview-header">
            <h4>پیش‌نمایش محتوای چندگزینه‌ای</h4>
        </div>
        <div class="preview-content">
            <div class="written-exercise-card">
                <div class="exercise-icon">
                    <i class="fas fa-list-ul"></i>
                </div>
                <div class="exercise-text">
                    <p>سوالات چندگزینه‌ای شما اینجا نمایش داده خواهد شد...</p>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Hidden field for content -->
<input type="hidden" id="multipleChoiceContentJson" value="@Model.ContentJson" />

<!-- Question Block Templates -->
<div id="questionBlockTemplates" style="display: none;">
    @{
        ViewData["IsQuestionBlock"] = "true";
    }
    @await Html.PartialAsync("_TextBlock", new { BlockType = "text" })
    @await Html.PartialAsync("_ImageBlock", new { BlockType = "image" })
    @await Html.PartialAsync("_VideoBlock", new { BlockType = "video" })
    @await Html.PartialAsync("_AudioBlock", new { BlockType = "audio" })
</div>

<!-- MCQ Questions Container Template -->
<div id="mcqQuestionsContainerTemplate" style="display: none;">
    @await Html.PartialAsync("_McqQuestionsContainer")
</div>

<!-- MCQ Question Item Template -->
<div id="mcqQuestionItemTemplate" style="display: none;">
    @await Html.PartialAsync("_McqQuestionItem", new { QuestionId = Guid.NewGuid().ToString(), QuestionIndex = 0 })
</div>

<!-- MCQ Option Item Template -->
<div id="mcqOptionItemTemplate" style="display: none;">
    @await Html.PartialAsync("_McqOptionItem", new { OptionIndex = 0, QuestionId = Guid.NewGuid().ToString(), IsSingle = true })
</div>

<script src="~/js/areas/teacher/schedule-items/managers/multiplechoice-content-manager.js" asp-append-version="true"></script>


