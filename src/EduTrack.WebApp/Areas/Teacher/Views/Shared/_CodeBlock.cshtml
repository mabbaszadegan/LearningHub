<link rel="stylesheet" href="~/css/areas/teacher/shared/code-block.css" asp-append-version="true" />
<link rel="stylesheet" href="~/css/areas/teacher/shared/content-blocks.css" asp-append-version="true" />

@{
    var blockType = ViewData["BlockType"]?.ToString() ?? "code";
    var isQuestionBlock = ViewData["IsQuestionBlock"]?.ToString() == "true";
    var blockTitle = isQuestionBlock ? "سوال کدی" : "بلاک کد";
    var questionText = isQuestionBlock ? "سوال مربوط به کد را اینجا تایپ کنید..." : "";
}

<div class="content-block-template" data-type="@blockType">
    <div class="block-header">
        <div class="block-type">
            <i class="fas fa-code"></i>
            <span>@blockTitle</span>
        </div>
        @await Html.PartialAsync("_BlockActions")
    </div>
    <div class="block-content">
        @if (isQuestionBlock)
        {
            <div class="question-settings inline">
                <div class="settings-grid">
                    <div class="setting-item">
                        <label>امتیاز:</label>
                        <select class="form-select-sm" data-setting="points">
                            <option value="1" selected>1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                            <option value="6">6</option>
                            <option value="7">7</option>
                            <option value="8">8</option>
                            <option value="9">9</option>
                            <option value="10">10</option>
                            <option value="11">11</option>
                            <option value="12">12</option>
                            <option value="13">13</option>
                            <option value="14">14</option>
                            <option value="15">15</option>
                            <option value="16">16</option>
                            <option value="17">17</option>
                            <option value="18">18</option>
                            <option value="19">19</option>
                            <option value="20">20</option>
                        </select>
                    </div>
                    <div class="setting-item">
                        <label class="checkbox-label">
                            <input type="checkbox" data-setting="isRequired" checked>
                            <span>اجباری</span>
                        </label>
                    </div>
                </div>
            </div>
            <div class="question-text-editor">
                <label>متن سوال:</label>
                <div class="rich-text-editor" contenteditable="true" data-placeholder="@questionText">
                    <!-- Rich text content will be here -->
                </div>
            </div>
        }
        
        <div class="code-block-settings">
            <div class="settings-grid">
                <div class="setting-item">
                    <label>زبان برنامه‌نویسی:</label>
                    <select class="form-select-sm" data-setting="language">
                        <option value="javascript">JavaScript</option>
                        <option value="python">Python</option>
                        <option value="csharp">C#</option>
                        <option value="java">Java</option>
                        <option value="cpp">C++</option>
                        <option value="c">C</option>
                        <option value="php">PHP</option>
                        <option value="ruby">Ruby</option>
                        <option value="go">Go</option>
                        <option value="rust">Rust</option>
                        <option value="swift">Swift</option>
                        <option value="kotlin">Kotlin</option>
                        <option value="typescript">TypeScript</option>
                        <option value="html">HTML</option>
                        <option value="css">CSS</option>
                        <option value="scss">SCSS</option>
                        <option value="sql">SQL</option>
                        <option value="json">JSON</option>
                        <option value="xml">XML</option>
                        <option value="yaml">YAML</option>
                        <option value="markdown">Markdown</option>
                        <option value="bash">Bash</option>
                        <option value="powershell">PowerShell</option>
                        <option value="plaintext" selected>Plain Text</option>
                    </select>
                </div>
                <div class="setting-item">
                    <label>تم رنگی:</label>
                    <select class="form-select-sm" data-setting="theme">
                        <option value="default" selected>پیش‌فرض</option>
                        <option value="dark">تیره</option>
                        <option value="light">روشن</option>
                        <option value="monokai">Monokai</option>
                        <option value="github">GitHub</option>
                        <option value="vs">Visual Studio</option>
                        <option value="atom">Atom</option>
                        <option value="dracula">Dracula</option>
                    </select>
                </div>
                @if (!isQuestionBlock)
                {
                    <div class="setting-item">
                        <label>اندازه:</label>
                        <select class="form-select-sm" data-setting="size">
                            <option value="small">کوچک</option>
                            <option value="medium" selected>متوسط</option>
                            <option value="large">بزرگ</option>
                            <option value="full">تمام عرض</option>
                        </select>
                    </div>
                }
            </div>
            <div class="settings-row">
                <div class="setting-item full-width">
                    <label>عنوان کد (اختیاری):</label>
                    <input type="text" class="form-control-sm" data-setting="title" placeholder="عنوان کد را وارد کنید">
                </div>
            </div>
            <div class="settings-row">
                <div class="setting-item">
                    <label class="checkbox-label">
                        <input type="checkbox" data-setting="showLineNumbers" checked>
                        <span>نمایش شماره خط</span>
                    </label>
                </div>
                <div class="setting-item">
                    <label class="checkbox-label">
                        <input type="checkbox" data-setting="enableCopyButton" checked>
                        <span>دکمه کپی</span>
                    </label>
                </div>
            </div>
        </div>
        
        <div class="code-editor-container">
            <div class="code-editor-header">
                <div class="code-language-badge">
                    <i class="fas fa-code"></i>
                    <span class="language-name">Plain Text</span>
                </div>
                <div class="code-actions">
                    <button type="button" class="btn-icon" data-action="copy-code" title="کپی کد">
                        <i class="fas fa-copy"></i>
                    </button>
                    <button type="button" class="btn-icon" data-action="format-code" title="فرمت کد">
                        <i class="fas fa-magic"></i>
                    </button>
                </div>
            </div>
            <div class="code-editor">
                <textarea class="code-textarea" data-code-content placeholder="کد خود را اینجا وارد کنید..."></textarea>
                <div class="code-preview" data-code-preview></div>
            </div>
            <div class="code-stats">
                <span class="line-count">خط: <span data-line-count>0</span></span>
                <span class="char-count">کاراکتر: <span data-char-count>0</span></span>
            </div>
        </div>
        
        @if (isQuestionBlock)
        {
            <div class="question-hint">
                <label>راهنمایی (اختیاری):</label>
                <textarea placeholder="راهنمایی برای دانش‌آموز..." rows="2" data-hint="true"></textarea>
            </div>
        }
    </div>
</div>

<script src="~/js/areas/teacher/shared/code-block.js" asp-append-version="true"></script>
