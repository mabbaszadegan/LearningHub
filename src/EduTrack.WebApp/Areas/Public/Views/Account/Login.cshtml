@model EduTrack.WebApp.Areas.Public.Controllers.LoginViewModel
@{
    ViewData["Title"] = "ورود به سیستم";
    Layout = null;
}

<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - EduTrack</title>
    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="~/css/site.css" asp-append-version="true" />
    <link rel="manifest" href="~/manifest.webmanifest" />
    <meta name="theme-color" content="#6366f1" />
    <meta name="description" content="EduTrack - سیستم مدیریت یادگیری آنلاین" />
</head>
<body>
    <div class="login-container">
        <div class="login-card">
            <h1 class="login-title text-gradient">EduTrack</h1>
            <p class="text-center text-muted mb-4">سیستم مدیریت یادگیری هوشمند</p>
            
            <form asp-controller="Account" asp-action="Login" asp-route-returnurl="@ViewData["ReturnUrl"]" method="post">
                <div asp-validation-summary="All" class="alert alert-danger" role="alert"></div>
                @Html.AntiForgeryToken()
                
                <div class="form-group mb-3">
                    <label asp-for="Email" class="form-label">نام کاربری</label>
                    <input name="Email" asp-for="Email" value="admin@local" class="form-control" placeholder="ایمیل خود را وارد کنید" />
                    <span asp-validation-for="Email" class="text-danger"></span>
                </div>
                
                <div class="form-group mb-3">
                    <label asp-for="Password" class="form-label">رمز عبور</label>
                    <input name="Password" asp-for="Password" value="Passw0rd!" class="form-control" placeholder="رمز عبور خود را وارد کنید" />
                    <span asp-validation-for="Password" class="text-danger"></span>
                </div>
                
                <div class="form-group mb-4">
                    <div class="form-check">
                        <input type="checkbox" asp-for="RememberMe" class="form-check-input" />
                        <label asp-for="RememberMe" class="form-check-label">
                            مرا به خاطر بسپار
                        </label>
                    </div>
                </div>
                
                <div class="form-group mb-4">
                    <button type="submit" class="btn btn-primary w-100" id="loginButton">
                        <span class="btn-text">ورود به سیستم</span>
                        <span class="loading d-none"></span>
                    </button>
                </div>
            </form>
            
            <div class="card mt-4">
                <div class="card-header bg-gradient-primary text-white">
                    <h5 class="mb-0">حساب‌های آزمایشی</h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-4 mb-2">
                            <div class="badge badge-primary w-100 p-2">مدیر سیستم</div>
                            <small class="text-muted d-block">admin@local</small>
                            <small class="text-muted">Passw0rd!</small>
                        </div>
                        <div class="col-md-4 mb-2">
                            <div class="badge badge-success w-100 p-2">استاد</div>
                            <small class="text-muted d-block">teacher@local</small>
                            <small class="text-muted">Passw0rd!</small>
                        </div>
                        <div class="col-md-4 mb-2">
                            <div class="badge badge-warning w-100 p-2">دانشجو</div>
                            <small class="text-muted d-block">student1@local</small>
                            <small class="text-muted">Passw0rd!</small>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <script src="~/lib/jquery-validation/dist/jquery.validate.min.js"></script>
    <script src="~/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.min.js"></script>
    <script>
        $(document).ready(function() {
            console.log('Login page loaded');
            
            $('form').on('submit', function(e) {
                console.log('Form submit event triggered');
                console.log('Form data:', $(this).serialize());
                
                // Show loading state
                $('#loginButton .btn-text').addClass('d-none');
                $('#loginButton .loading').removeClass('d-none');
                $('#loginButton').prop('disabled', true);
                
                // Check if form is valid
                if (!$(this).valid()) {
                    console.log('Form validation failed');
                    $('#loginButton .btn-text').removeClass('d-none');
                    $('#loginButton .loading').addClass('d-none');
                    $('#loginButton').prop('disabled', false);
                    e.preventDefault();
                    return false;
                }
                
                console.log('Form is valid, submitting...');
            });
            
            $('#loginButton').on('click', function(e) {
                console.log('Login button clicked');
            });
            
            // Add click handlers for demo accounts
            $('.badge').on('click', function() {
                const email = $(this).siblings('small').first().text();
                const password = $(this).siblings('small').last().text();
                
                $('input[name="Email"]').val(email);
                $('input[name="Password"]').val(password);
                
                // Add visual feedback
                $(this).addClass('bg-success text-white');
                setTimeout(() => {
                    $(this).removeClass('bg-success text-white');
                }, 1000);
            });
        });
    </script>
</body>
</html>